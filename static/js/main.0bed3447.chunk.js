(this["webpackJsonpreact-typescript"]=this["webpackJsonpreact-typescript"]||[]).push([[0],{69:function(e,t,a){e.exports=a(88)},87:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(9);const c=Object(n.createContext)({get services(){throw Error("services are not provided")}}),o=()=>Object(n.useContext)(c).services;var i=a(21),u=a(130),s=a(131),m=a(58),b=a(44);const E=()=>o().locationExtractor.getTitle(),h=()=>o().locationExtractor.getOptions();var p=a(124),g=a(139),d=a(125),O=a(122),v=a(51);const j=({value:e})=>l.a.createElement(v.a,null,l.a.createElement("title",null,e)),C=Object(O.a)({root:{marginTop:"12%"}}),k=({children:e})=>{const t=C(),a=E()||"Choose what you like";return l.a.createElement(p.a,{in:!0,appear:!0},l.a.createElement(g.a,null,l.a.createElement(j,{value:a}),l.a.createElement(d.a,{className:t.root,maxWidth:"sm"},e)))};var y=a(27),f=a(129),S=a(127),w=a(141);const x=({name:e,label:t=e,value:a,onChange:n})=>l.a.createElement(S.a,{control:l.a.createElement(w.a,{checked:a,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(e=>n(e.target.checked)),name:e}),label:t}),L=()=>{const e=h(),t=Object(n.useState)(()=>A(e)),a=Object(i.a)(t,2),r=a[0],c=a[1],o=Object(n.useCallback)((e,t)=>{const a=Object.keys(r),n=a.indexOf(e),l=a.length>1?[...a.slice(0,n),...a.slice(n+1)]:[],o=l[Math.floor(Math.random()*l.length)];c(Object(y.a)(a=>{e in a&&(a[e]=t),t&&o in a&&(a[o]=!1)}))},[r]);return l.a.createElement(f.a,null,Object.keys(r).map(e=>l.a.createElement(x,{key:e,name:e,value:!!r[e],onChange:t=>o(e,t)})))},A=e=>e.reduce((e,t)=>(e[t]=!1,e),{});var P=a(132),W=a(133);const T=({onSubmit:e})=>{const t=E()||"Choose what you like",a=o().locationExtractor.getSubmitLabel()||"Accept";return l.a.createElement(k,null,l.a.createElement(u.a,null,l.a.createElement(s.a,null,l.a.createElement(m.a,{variant:"h4"},t),l.a.createElement(L,null)),l.a.createElement(P.a,null,l.a.createElement(W.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:e},a))))},I=({onCreateClick:e})=>l.a.createElement(k,null,l.a.createElement(u.a,null,l.a.createElement(s.a,null,l.a.createElement(m.a,{variant:"h4"},"Wise choice!")),l.a.createElement(P.a,null,l.a.createElement(W.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:e},"Share"))));var B=a(138),R=a(135),J=a(136),M=a(128),z=a(137),D=a(140);const H=()=>{const e=o().locationExtractor,t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],c=a[1],b=Object(n.useState)({title:e.getTitle()||"Choose what you like",submitLabel:e.getSubmitLabel()||"Accept",options:e.getOptions()}),E=Object(i.a)(b,2),h=E[0],p=h.title,g=h.submitLabel,d=h.options,O=E[1],v=d.length>1,j=e.getShareLink({title:p,submitLabel:g,options:d}),C=Object(n.useRef)(null),f=Object(n.useCallback)(e=>O(Object(y.a)(t=>{t.title=e})),[]),S=Object(n.useCallback)(e=>O(Object(y.a)(t=>{t.submitLabel=e})),[]),w=Object(n.useCallback)(e=>{e&&(O(Object(y.a)(t=>{t.options.push(e)})),c(""))},[]),x=Object(n.useCallback)(e=>{O(Object(y.a)(t=>{t.options.splice(e,1)}))},[]),L=Object(n.useCallback)((e,t)=>{O(Object(y.a)(a=>{a.options[t]=e}))},[]),A=Object(n.useState)(!1),T=Object(i.a)(A,2),I=T[0],H=T[1],K=Object(n.useCallback)(()=>H(!1),[]),N=Object(n.useCallback)(()=>H(!0),[]),U=Object(n.useCallback)(()=>{var e,t;C.current&&(null===(e=C.current)||void 0===e||e.select(),null===(t=C.current)||void 0===t||t.setSelectionRange(0,9999),document.execCommand("copy"),N())},[N]);return l.a.createElement(k,null,l.a.createElement(u.a,null,l.a.createElement(s.a,null,l.a.createElement(m.a,{variant:"h4"},"Create and Share"),l.a.createElement(B.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Title",value:p,onChange:e=>f(e.target.value)}),l.a.createElement(B.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Submit Button Label",value:g,onChange:e=>S(e.target.value)}),d.map((e,t)=>l.a.createElement(R.a,{in:!0,appear:!0},l.a.createElement(B.a,{key:t,fullWidth:!0,margin:"normal",variant:"outlined",label:"Edit Option",value:e,onChange:e=>L(e.target.value,t),InputProps:{endAdornment:l.a.createElement(J.a,{position:"end"},l.a.createElement(M.a,{onClick:()=>x(t)},l.a.createElement(z.a,null,"close")))}}))),l.a.createElement(B.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:"Add Option",value:r,onChange:e=>c(e.target.value),onBlur:e=>w(r),onKeyUp:e=>13===e.keyCode&&w(r)}),l.a.createElement(R.a,{in:!v,mountOnEnter:!0,unmountOnExit:!0},l.a.createElement(m.a,{variant:"caption"},"At least two options make sense")),l.a.createElement(R.a,{in:v,mountOnEnter:!0,unmountOnExit:!0},l.a.createElement(B.a,{fullWidth:!0,inputRef:C,margin:"normal",variant:"outlined",label:"Share",value:j,InputProps:{endAdornment:l.a.createElement(J.a,{position:"end"},l.a.createElement(M.a,{onClick:U},l.a.createElement(z.a,null,"share")))}}))),l.a.createElement(R.a,{in:v,mountOnEnter:!0,unmountOnExit:!0},l.a.createElement(P.a,null,l.a.createElement(W.a,{href:j,target:"_blank",startIcon:l.a.createElement(z.a,null,"launch"),variant:"contained",color:"primary",fullWidth:!0},"Open")))),l.a.createElement(D.a,{message:"Link copied to clipboard",anchorOrigin:{vertical:"bottom",horizontal:"center"},open:I,autoHideDuration:6e3,onClose:K}))},K=()=>{const e=h(),t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(!1),u=Object(i.a)(o,2),s=u[0],m=u[1],b=Object(n.useCallback)(()=>{m(!0),c(!1)},[]);return s?l.a.createElement(H,null):r?l.a.createElement(I,{onCreateClick:b}):e.length>0?l.a.createElement(T,{onSubmit:()=>c(!0)}):l.a.createElement(H,null)};a(87);const N=({services:e})=>l.a.createElement(c.Provider,{value:{services:e}},l.a.createElement(K,null)),U=document.getElementById("root");Object(r.render)(n.createElement(N,{services:{locationExtractor:new class{constructor(e){this.window=e}getTitle(){return this.getStringParam("title")}getOptions(){return this.getArrayParam("option")}getSubmitLabel(){return this.getStringParam("submitLabel")}getShareLink(e){return"".concat(this.window.location.origin).concat(this.window.location.pathname,"?").concat((({title:e="Choose what you like",submitLabel:t="Accept",options:a=[]})=>Object(b.stringify)({title:e,submitLabel:t,option:a}))(e))}get location(){return this.window.location}getParam(e){const t=this.location.search;return Object(b.parse)(t)[e]}getStringParam(e){const t=this.getParam(e);return"string"===typeof t?t:t instanceof Array?t[0]:void 0}getArrayParam(e){const t=this.getParam(e);return t instanceof Array?t:"string"===typeof t?[t]:[]}}(window)}}),U)}},[[69,1,2]]]);
//# sourceMappingURL=main.0bed3447.chunk.js.map